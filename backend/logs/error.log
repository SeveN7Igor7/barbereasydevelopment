{"timestamp":"2025-08-12T15:04:20.238Z","level":"ERROR","message":"Erro não tratado na rota POST /agendamentos","data":{"message":"Expected ',' or '}' after property value in JSON at position 156","stack":"SyntaxError: Expected ',' or '}' after property value in JSON at position 156\n    at JSON.parse (<anonymous>)\n    at parse (C:\\Users\\igorv\\Desktop\\barbereasy\\barbereasy\\backend\\node_modules\\body-parser\\lib\\types\\json.js:77:19)\n    at C:\\Users\\igorv\\Desktop\\barbereasy\\barbereasy\\backend\\node_modules\\body-parser\\lib\\read.js:123:18\n    at AsyncResource.runInAsyncScope (node:async_hooks:206:9)\n    at invokeCallback (C:\\Users\\igorv\\Desktop\\barbereasy\\barbereasy\\backend\\node_modules\\raw-body\\index.js:238:16)\n    at done (C:\\Users\\igorv\\Desktop\\barbereasy\\barbereasy\\backend\\node_modules\\raw-body\\index.js:227:7)\n    at IncomingMessage.onEnd (C:\\Users\\igorv\\Desktop\\barbereasy\\barbereasy\\backend\\node_modules\\raw-body\\index.js:287:7)\n    at IncomingMessage.emit (node:events:519:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:82:21)","name":"SyntaxError"}}
{"timestamp":"2025-08-13T17:31:10.746Z","level":"ERROR","message":"Erro ao limpar logs antigos","data":{"message":"Cannot read properties of undefined (reading 'days')","stack":"TypeError: Cannot read properties of undefined (reading 'days')\n    at C:\\Users\\igorv\\Desktop\\barbereasy\\barbereasy\\backend\\index.js:159:13\n    at Layer.handleRequest (C:\\Users\\igorv\\Desktop\\barbereasy\\barbereasy\\backend\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (C:\\Users\\igorv\\Desktop\\barbereasy\\barbereasy\\backend\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (C:\\Users\\igorv\\Desktop\\barbereasy\\barbereasy\\backend\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (C:\\Users\\igorv\\Desktop\\barbereasy\\barbereasy\\backend\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (C:\\Users\\igorv\\Desktop\\barbereasy\\barbereasy\\backend\\node_modules\\router\\lib\\layer.js:152:17)\n    at C:\\Users\\igorv\\Desktop\\barbereasy\\barbereasy\\backend\\node_modules\\router\\index.js:295:15\n    at processParams (C:\\Users\\igorv\\Desktop\\barbereasy\\barbereasy\\backend\\node_modules\\router\\index.js:582:12)\n    at next (C:\\Users\\igorv\\Desktop\\barbereasy\\barbereasy\\backend\\node_modules\\router\\index.js:291:5)\n    at Layer.handleRequest (C:\\Users\\igorv\\Desktop\\barbereasy\\barbereasy\\backend\\node_modules\\router\\lib\\layer.js:147:12)","name":"TypeError"}}
{"timestamp":"2025-08-13T18:26:55.022Z","level":"ERROR","message":"Erro ao buscar horários","data":{"message":"\nInvalid `prisma.horario.findMany()` invocation in\n/home/ubuntu/barbereasy/backend/barbearia/barbearia.controller.js:183:43\n\n  180 try {\n  181   const { id } = req.params;\n  182   \n→ 183   const horarios = await prisma.horario.findMany(\nCan't reach database server at `localhost:5432`\n\nPlease make sure your database server is running at `localhost:5432`.","stack":"PrismaClientInitializationError: \nInvalid `prisma.horario.findMany()` invocation in\n/home/ubuntu/barbereasy/backend/barbearia/barbearia.controller.js:183:43\n\n  180 try {\n  181   const { id } = req.params;\n  182   \n→ 183   const horarios = await prisma.horario.findMany(\nCan't reach database server at `localhost:5432`\n\nPlease make sure your database server is running at `localhost:5432`.\n    at ri.handleRequestError (/home/ubuntu/barbereasy/backend/node_modules/@prisma/client/runtime/library.js:121:7759)\n    at ri.handleAndLogRequestError (/home/ubuntu/barbereasy/backend/node_modules/@prisma/client/runtime/library.js:121:6784)\n    at ri.request (/home/ubuntu/barbereasy/backend/node_modules/@prisma/client/runtime/library.js:121:6491)\n    at async l (/home/ubuntu/barbereasy/backend/node_modules/@prisma/client/runtime/library.js:130:9812)\n    at async getHorariosByBarbearia (/home/ubuntu/barbereasy/backend/barbearia/barbearia.controller.js:183:22)","name":"PrismaClientInitializationError"}}
{"timestamp":"2025-08-13T18:35:16.107Z","level":"ERROR","message":"Erro ao redimensionar imagem","data":{"message":"Cannot use same file for input and output","stack":"Error: Cannot use same file for input and output\n    at Sharp.toFile (C:\\Users\\igorv\\Desktop\\barbereasy\\barbereasy\\backend\\node_modules\\sharp\\lib\\output.js:77:11)\n    at resizeImage (C:\\Users\\igorv\\Desktop\\barbereasy\\barbereasy\\backend\\utils\\upload.js:57:8)\n    at C:\\Users\\igorv\\Desktop\\barbereasy\\barbereasy\\backend\\utils\\upload.js:95:13\n    at done (C:\\Users\\igorv\\Desktop\\barbereasy\\barbereasy\\backend\\node_modules\\multer\\lib\\make-middleware.js:59:7)\n    at indicateDone (C:\\Users\\igorv\\Desktop\\barbereasy\\barbereasy\\backend\\node_modules\\multer\\lib\\make-middleware.js:63:68)\n    at C:\\Users\\igorv\\Desktop\\barbereasy\\barbereasy\\backend\\node_modules\\multer\\lib\\make-middleware.js:176:11\n    at WriteStream.<anonymous> (C:\\Users\\igorv\\Desktop\\barbereasy\\barbereasy\\backend\\node_modules\\multer\\storage\\disk.js:43:9)\n    at WriteStream.emit (node:events:531:35)\n    at finish (node:internal/streams/writable:946:10)\n    at node:internal/streams/writable:927:13","name":"Error"}}
{"timestamp":"2025-08-13T18:35:16.157Z","level":"ERROR","message":"Erro ao processar logo","data":{"message":"Cannot use same file for input and output","stack":"Error: Cannot use same file for input and output\n    at Sharp.toFile (C:\\Users\\igorv\\Desktop\\barbereasy\\barbereasy\\backend\\node_modules\\sharp\\lib\\output.js:77:11)\n    at resizeImage (C:\\Users\\igorv\\Desktop\\barbereasy\\barbereasy\\backend\\utils\\upload.js:57:8)\n    at C:\\Users\\igorv\\Desktop\\barbereasy\\barbereasy\\backend\\utils\\upload.js:95:13\n    at done (C:\\Users\\igorv\\Desktop\\barbereasy\\barbereasy\\backend\\node_modules\\multer\\lib\\make-middleware.js:59:7)\n    at indicateDone (C:\\Users\\igorv\\Desktop\\barbereasy\\barbereasy\\backend\\node_modules\\multer\\lib\\make-middleware.js:63:68)\n    at C:\\Users\\igorv\\Desktop\\barbereasy\\barbereasy\\backend\\node_modules\\multer\\lib\\make-middleware.js:176:11\n    at WriteStream.<anonymous> (C:\\Users\\igorv\\Desktop\\barbereasy\\barbereasy\\backend\\node_modules\\multer\\storage\\disk.js:43:9)\n    at WriteStream.emit (node:events:531:35)\n    at finish (node:internal/streams/writable:946:10)\n    at node:internal/streams/writable:927:13","name":"Error"}}
{"timestamp":"2025-09-01T23:08:28.127Z","level":"ERROR","message":"Erro ao criar pagamento no Mercado Pago","data":{"message":"notificaction_url attribute must be url valid"}}
{"timestamp":"2025-09-01T23:16:23.243Z","level":"ERROR","message":"Erro ao criar pagamento no Mercado Pago","data":{"message":"notificaction_url attribute must be url valid"}}
{"timestamp":"2025-09-01T23:17:26.877Z","level":"ERROR","message":"Erro ao criar pagamento no Mercado Pago","data":{"message":"notificaction_url attribute must be url valid"}}
{"timestamp":"2025-09-01T23:22:13.928Z","level":"ERROR","message":"Erro ao criar pagamento no Mercado Pago","data":{"message":"Header X-Idempotency-Key can’t be null"}}
